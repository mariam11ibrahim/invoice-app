(function(){"use strict";var e={8438:function(e,t,i){var s=i(9242),a=i(3396),o=i(7139);const n=["id"],l=["id"];function r(e,t,i,r,d,c){const u=(0,a.up)("TheSidebar"),m=(0,a.up)("TheBackdrop"),p=(0,a.up)("BaseLoader"),h=(0,a.up)("FormInvoice"),g=(0,a.up)("BaseMessage"),v=(0,a.up)("router-view");return(0,a.wg)(),(0,a.iD)("div",{id:c.themeId,class:"app-body"},[(0,a.Wm)(s.uT,{name:"fade"},{default:(0,a.w5)((()=>[c.isLandingPage?(0,a.kq)("",!0):((0,a.wg)(),(0,a.j4)(u,{key:0}))])),_:1}),((0,a.wg)(),(0,a.j4)(a.lR,{to:"body"},[(0,a.Wm)(s.uT,{name:"backdrop"},{default:(0,a.w5)((()=>[c.showBackdrop?((0,a.wg)(),(0,a.j4)(m,{key:0})):(0,a.kq)("",!0)])),_:1}),c.isLoading?((0,a.wg)(),(0,a.j4)(p,{key:0})):(0,a.kq)("",!0)])),(0,a.Wm)(s.uT,{name:"form"},{default:(0,a.w5)((()=>[c.isFormInvoiceOpen?((0,a.wg)(),(0,a.j4)(h,{key:0})):(0,a.kq)("",!0)])),_:1}),(0,a.Wm)(g,{type:c.messageType,show:c.showRequestStateMessage},{title:(0,a.w5)((()=>[(0,a.Uk)((0,o.zw)(c.messageType.toUpperCase()),1)])),message:(0,a.w5)((()=>[(0,a.Uk)((0,o.zw)(c.message.toLowerCase()),1)])),_:1},8,["type","show"]),(0,a._)("main",{id:c.themeId,onClick:t[0]||(t[0]=(...e)=>c.handleMainClick&&c.handleMainClick(...e))},[(0,a.Wm)(v,null,{default:(0,a.w5)((({Component:t,route:i})=>[(0,a.Wm)(s.uT,{name:i.meta.transition,mode:"out-in"},{default:(0,a.w5)((()=>[((0,a.wg)(),(0,a.j4)((0,a.LL)(t),{key:e.$route.path}))])),_:2},1032,["name"])])),_:1})],8,l)],8,n)}var d=i.p+"img/circle.bd659b55.png";const c=e=>((0,a.dD)("data-v-28ebc30d"),e=e(),(0,a.Cn)(),e),u={class:"side-bar"},m=c((()=>(0,a._)("div",{class:"logo__layer"},null,-1))),p=c((()=>(0,a._)("img",{class:"logo__img",src:d,alt:"logo"},null,-1))),h=[m,p],g={class:"side-bar__actions"},v={class:"mood"};function y(e,t,i,s,o,n){const l=(0,a.up)("BaseIcon"),r=(0,a.up)("LogoutDialog");return(0,a.wg)(),(0,a.iD)("aside",u,[(0,a._)("div",{class:"logo",onClick:t[0]||(t[0]=(...e)=>n.gotToLandingPage&&n.gotToLandingPage(...e))},h),(0,a._)("div",null,[(0,a._)("div",g,[(0,a._)("div",v,[(0,a.Wm)(l,{name:n.moodIcon,size:"medium",onClick:n.toggleTheme},null,8,["name","onClick"])]),(0,a._)("div",{class:"logout",onClick:t[1]||(t[1]=(...e)=>n.showBaseDialog&&n.showBaseDialog(...e))},[(0,a.Wm)(l,{name:"logout",size:"big"})])])]),(0,a.Wm)(r,{onLoggedout:n.navigateToLandingPage},null,8,["onLoggedout"])])}function I(e,t,i,s,o,n){const l=(0,a.up)("BaseButton"),r=(0,a.up)("BaseDialog");return(0,a.wg)(),(0,a.j4)(a.lR,{to:"body"},["logout"==n.baseDialogRole?((0,a.wg)(),(0,a.j4)(r,{key:"logout",title:"Confirm Logout",message:"Are you sure you want to logout?"},{action:(0,a.w5)((()=>[(0,a.Wm)(l,{name:"Logout",color:"red",onClick:n.logout},null,8,["onClick"])])),_:1})):(0,a.kq)("",!0)])}var _={emits:["loggedout"],computed:{isBaseDialogClosed(){return this.$store.getters.isBaseDialogClosed},baseDialogRole(){return this.$store.getters.baseDialogRole}},methods:{logout(){this.$store.dispatch("closeBaseDialog",{isClosed:!0,dialogRole:null}),this.$store.dispatch("auth/logout"),this.$emit("loggedout")}}},D=i(89);const f=(0,D.Z)(_,[["render",I]]);var k=f,b={components:{LogoutDialog:k},computed:{moodIcon(){return"light"==this.$store.getters.theme?"moon":"sun"}},methods:{gotToLandingPage(){this.$router.replace("/")},showBaseDialog(){this.$store.dispatch("closeFormInvoice"),this.$store.dispatch("closeBaseDialog",{isClosed:!1,dialogRole:"logout"})},navigateToLandingPage(){setTimeout((()=>this.gotToLandingPage()),1e3)},toggleTheme(){this.$store.dispatch("toggleTheme")}}};const w=(0,D.Z)(b,[["render",y],["__scopeId","data-v-28ebc30d"]]);var C=w;const B=e=>((0,a.dD)("data-v-561b89ce"),e=e(),(0,a.Cn)(),e),V=B((()=>(0,a._)("header",{class:"form__header"},[(0,a._)("h1",null,"Create Invoice")],-1))),S={class:"form__body"},q={class:"form__group"},$=B((()=>(0,a._)("h3",null,"Bill Form",-1))),T={class:"form__group--inline"},L={class:"form__group"},F=B((()=>(0,a._)("h3",null,"Bill To",-1))),E={class:"form__group--inline"},W={class:"form__group--inline"},A={class:"form__action"};function M(e,t,i,s,o,n){const l=(0,a.up)("BaseInput"),r=(0,a.up)("TheDateInput"),d=(0,a.up)("BaseSelectInput"),c=(0,a.up)("FormInvoiceItems"),u=(0,a.up)("BaseButton");return(0,a.wg)(),(0,a.iD)("section",{class:"form-invoice",onClick:t[16]||(t[16]=e=>n.getClickedElement(e))},[(0,a._)("form",{class:"form",ref:"form",onSubmit:t[15]||(t[15]=e=>n.saveInvoice("pending",e))},[V,(0,a._)("div",S,[(0,a._)("div",q,[$,t[0]||((0,a.qZ)(-1),t[0]=(0,a.Wm)(l,{type:"text",label:"Street Address",onGetValue:e=>n.getInputValue(["senderAddress","street"],e),value:n.toBeEditedValue("senderAddress","street")},null,8,["onGetValue","value"]),(0,a.qZ)(1),t[0]),(0,a._)("div",T,[t[1]||((0,a.qZ)(-1),t[1]=(0,a.Wm)(l,{type:"text",label:"City",onGetValue:e=>n.getInputValue(["senderAddress","city"],e),value:n.toBeEditedValue("senderAddress","city")},null,8,["onGetValue","value"]),(0,a.qZ)(1),t[1]),t[2]||((0,a.qZ)(-1),t[2]=(0,a.Wm)(l,{type:"text",label:"Post Code",onGetValue:e=>n.getInputValue(["senderAddress","postCode"],e),value:n.toBeEditedValue("senderAddress","postCode")},null,8,["onGetValue","value"]),(0,a.qZ)(1),t[2]),t[3]||((0,a.qZ)(-1),t[3]=(0,a.Wm)(l,{type:"text",label:"Country",onGetValue:e=>n.getInputValue(["senderAddress","country"],e),value:n.toBeEditedValue("senderAddress","country")},null,8,["onGetValue","value"]),(0,a.qZ)(1),t[3])])]),(0,a._)("div",L,[F,t[4]||((0,a.qZ)(-1),t[4]=(0,a.Wm)(l,{type:"text",label:"Client's Name",onGetValue:e=>n.getInputValue(["clientName"],e),value:n.toBeEditedValue("clientName")},null,8,["onGetValue","value"]),(0,a.qZ)(1),t[4]),t[5]||((0,a.qZ)(-1),t[5]=(0,a.Wm)(l,{type:"email",label:"Client's Email",placeholder:"e.g. email@example.com",onGetValue:e=>n.getInputValue(["clientEmail"],e),value:n.toBeEditedValue("clientEmail")},null,8,["onGetValue","value"]),(0,a.qZ)(1),t[5]),t[6]||((0,a.qZ)(-1),t[6]=(0,a.Wm)(l,{type:"text",label:"Street Address",onGetValue:e=>n.getInputValue(["clientAddress","street"],e),value:n.toBeEditedValue("clientAddress","street")},null,8,["onGetValue","value"]),(0,a.qZ)(1),t[6]),(0,a._)("div",E,[t[7]||((0,a.qZ)(-1),t[7]=(0,a.Wm)(l,{type:"text",label:"City",onGetValue:e=>n.getInputValue(["clientAddress","city"],e),value:n.toBeEditedValue("clientAddress","city")},null,8,["onGetValue","value"]),(0,a.qZ)(1),t[7]),t[8]||((0,a.qZ)(-1),t[8]=(0,a.Wm)(l,{type:"text",label:"Post Code",onGetValue:e=>n.getInputValue(["clientAddress","postCode"],e),value:n.toBeEditedValue("clientAddress","postCode")},null,8,["onGetValue","value"]),(0,a.qZ)(1),t[8]),t[9]||((0,a.qZ)(-1),t[9]=(0,a.Wm)(l,{type:"text",label:"Country",onGetValue:e=>n.getInputValue(["clientAddress","country"],e),value:n.toBeEditedValue("clientAddress","country")},null,8,["onGetValue","value"]),(0,a.qZ)(1),t[9])]),(0,a._)("div",W,[(0,a.Wm)(r,{clickedElement:o.clickedElement,onGetDateValue:t[10]||(t[10]=e=>n.getInputValue(["createdAt"],e)),value:n.toBeEditedValue("createdAt")},null,8,["clickedElement","value"]),(0,a.Wm)(d,{clickedElement:o.clickedElement,onGetSelectedValue:t[11]||(t[11]=e=>n.getInputValue(["paymentTerms"],e)),value:n.toBeEditedValue("paymentTerms")},null,8,["clickedElement","value"])]),t[12]||((0,a.qZ)(-1),t[12]=(0,a.Wm)(l,{type:"text",label:"Description",placeholder:"e.g. Graphic Service",onGetValue:e=>n.getInputValue(["description"],e),value:n.toBeEditedValue("description")},null,8,["onGetValue","value"]),(0,a.qZ)(1),t[12])]),(0,a.Wm)(c,{dataFormItems:o.formData.items,onGetItems:n.getItemsData,toEdit:o.toEdit},null,8,["dataFormItems","onGetItems","toEdit"])]),(0,a._)("div",A,[(0,a.Wm)(u,{type:"button",name:"Discard",color:"gray",onClick:n.closeForm},null,8,["onClick"]),(0,a._)("div",null,[o.toEdit?(0,a.kq)("",!0):((0,a.wg)(),(0,a.j4)(u,{key:0,type:"button",name:"Save as Draft",color:"dark",onClick:t[13]||(t[13]=e=>n.saveInvoice("draft",e))})),(0,a.Wm)(u,{type:"submit",name:"Save & Send",color:"purple",disabled:!n.checkIsFormValid(),onClick:t[14]||(t[14]=e=>n.handleSubmitButtonClick())},null,8,["disabled"])])])],544)])}var R=i(536);const P={class:"the-date-input"};function Z(e,t,i,s,o,n){const l=(0,a.up)("BaseInput"),r=(0,a.up)("TheDatePicker");return(0,a.wg)(),(0,a.iD)("div",P,[(0,a.Wm)(l,{type:"text",label:"Invoice Date",icon:"calendar",readonly:!0,value:o.invoiceDate,placeholder:o.invoiceDate,onClick:n.openDatePicker},null,8,["value","placeholder","onClick"]),(0,a.Wm)(r,{onOnGetDateValue:n.getDateValue,hidden:o.isDatepickerHidden},null,8,["onOnGetDateValue","hidden"])])}const z={class:"date-picker__header"},N={class:"date-picker__days"},U=["onClick"],O={key:0};function G(e,t,i,s,n,l){const r=(0,a.up)("BaseIcon");return(0,a.wg)(),(0,a.iD)("div",{class:(0,o.C_)(["date-picker",{hidden:n.isDatePickerhidden}])},[(0,a._)("header",z,[(0,a.Wm)(r,{name:"chevron",onClick:t[0]||(t[0]=e=>l.handleMonthNavigator(-1))}),(0,a._)("span",null,(0,o.zw)(l.monthName)+" "+(0,o.zw)(n.year),1),(0,a.Wm)(r,{name:"chevron",onClick:t[1]||(t[1]=e=>l.handleMonthNavigator(1))})]),(0,a._)("div",N,[((0,a.wg)(!0),(0,a.iD)(a.HY,null,(0,a.Ko)(l.monthDaysNumber,(e=>((0,a.wg)(),(0,a.iD)("span",{class:(0,o.C_)(["day",{active:l.isActiveDay(e)}]),key:e,onClick:t=>l.getSelectedDate(e)},[(0,a.Uk)((0,o.zw)(e)+" ",1),e%7==0?((0,a.wg)(),(0,a.iD)("br",O)):(0,a.kq)("",!0)],10,U)))),128))])],2)}const x=["January","February","March","April","May","June","July","August","September","October","November","December"];var H={data(){let e=new Date;return{now:e,monthsIndex:e.getMonth(),year:e.getFullYear(),isDatePickerhidden:this.hidden}},props:{hidden:{type:Boolean,default:!0}},computed:{day(){return this.now.getDate()},monthName(){return x[this.monthsIndex]},monthDaysNumber(){return new Date(this.year,this.monthsIndex+1,0).getDate()}},watch:{hidden(){this.isDatePickerhidden=this.hidden}},emits:["on-get-date-value"],methods:{getSelectedDate(e){this.$emit("on-get-date-value",`${this.year} ${this.monthName} ${e}`),this.isDatePickerhidden=!0},isActiveDay(e){return this.day==e&&this.year==(new Date).getFullYear()&&this.monthsIndex==(new Date).getMonth()},handleMonthNavigator(e){this.monthsIndex<11&&this.monthsIndex>0||11==this.monthsIndex&&-1==e||0==this.monthsIndex&&1==e?this.monthsIndex+=e:(this.monthsIndex=11==this.monthsIndex?0:11,this.year+=e)}},mounted(){this.getSelectedDate(this.day)}};const j=(0,D.Z)(H,[["render",G],["__scopeId","data-v-a147fe12"]]);var Y=j,J={components:{TheDatePicker:Y},props:{clickedElement:{type:Object},value:{type:String}},data(){return{invoiceDate:"",isDatepickerHidden:!1,dueDate:""}},watch:{clickedElement(){this.hideDatePicker()}},methods:{openDatePicker(){this.isDatepickerHidden=!1},getDateValue(e){this.invoiceDate=e,this.isDatepickerHidden=!0,this.$emit("get-date-value",{value:e,isValid:!!e})},hideDatePicker(){this.clickedElement.closest(".date-picker")&&!this.clickedElement.classList.contains("day")||"Invoice Date"==this.clickedElement.id||(this.isDatepickerHidden=!0)},reformatDate(){if(!this.value)return;this.invoiceDate=this.value;const e=this.value.split(" ");this.invoiceDate=`${e[2]} ${e[1]} ${e[0]}`}},mounted(){this.reformatDate(),this.$emit("get-date-value",{value:this.invoiceDate,isValid:!!this.invoiceDate})}};const K=(0,D.Z)(J,[["render",Z],["__scopeId","data-v-85f8d5b2"]]);var Q=K;const X=e=>((0,a.dD)("data-v-3a19ee46"),e=e(),(0,a.Cn)(),e),ee={class:"form__group"},te=X((()=>(0,a._)("h2",null,"Items List",-1)));function ie(e,t,i,o,n,l){const r=(0,a.up)("BaseInput"),d=(0,a.up)("BaseIcon"),c=(0,a.up)("BaseButton");return(0,a.wg)(),(0,a.iD)("div",ee,[te,((0,a.wg)(!0),(0,a.iD)(a.HY,null,(0,a.Ko)(n.itemList,((e,t)=>((0,a.wg)(),(0,a.iD)("div",{class:"form__group--inline items-list",key:e.id},[(0,a.Wm)(r,{type:"text",label:"Item Name",onGetValue:e=>l.getItemDataValue("name",t,e),isSubmitButtonClicked:i.isSubmitButtonClicked,value:l.toBeEditedValue(t,e.id,"name")},null,8,["onGetValue","isSubmitButtonClicked","value"]),(0,a.Wm)(r,{type:"number",label:"Qty.",onGetValue:e=>l.getItemDataValue("quantity",t,e),isSubmitButtonClicked:i.isSubmitButtonClicked,value:l.toBeEditedValue(t,e.id,"quantity")},null,8,["onGetValue","isSubmitButtonClicked","value"]),(0,a.Wm)(r,{type:"number",label:"Price",onGetValue:e=>l.getItemDataValue("price",t,e),isSubmitButtonClicked:i.isSubmitButtonClicked,value:l.toBeEditedValue(t,e.id,"price")},null,8,["onGetValue","isSubmitButtonClicked","value"]),(0,a.Wm)(r,{type:"number",label:"Total",readonly:!0,noBorder:!0,value:n.itemList[t].total||l.toBeEditedValue(t,e.id,"total")||0,isSubmitButtonClicked:i.isSubmitButtonClicked},null,8,["value","isSubmitButtonClicked"]),(0,a.Wm)(d,{type:"button",name:"delete",onClick:i=>l.deletItem(e.id,t)},null,8,["onClick"])])))),128)),(0,a.Wm)(c,{type:"button",name:"Add New Item",color:"gray",fullWidth:!0,onClick:(0,s.iM)(l.addNewItem,["prevent"]),size:"full-width"},{default:(0,a.w5)((()=>[(0,a.Wm)(d,{name:"plus",size:"small"})])),_:1},8,["onClick"])])}function se(e){for(const t in e)if(0==e[t])return!1;return!0}var ae={props:["isSubmitButtonClicked","dataFormItems","toEdit"],data(){return{itemList:[{id:(0,R.Z)(),name:"",quantity:"",price:"",total:0}],itemsValidation:[]}},methods:{validateItemData(e,t){this.itemsValidation[e]=!(!t.name||!+t.total)},validateAndEmmitChanges(){let e;e=0!=this.itemsValidation.length&&se(this.itemsValidation),this.$emit("get-items",{value:this.itemList,isValid:e})},getItemDataValue(e,t,i){let s=this.itemList;s[t]||this.addNewItem();let a=s[t];a[e]=i.value,s[t]=a,this.handleItemDataTotalValue(a,e),this.validateItemData(t,a),this.validateAndEmmitChanges()},handleItemDataTotalValue(e,t){if("name"==t)return;let i=e["price"]?e["price"]:0,s=e["quantity"]?e["quantity"]:0,a=+i*+s;e["total"]=`${a}`},addNewItem(){let e={id:(0,R.Z)(),name:"",quantity:"",price:"",total:""};this.itemList.push(e);let t=this.itemList.length-1;this.validateItemData(t,e),this.validateAndEmmitChanges()},deletItem(e,t){this.itemList=this.itemList.filter((t=>t.id!=e)),this.itemsValidation.splice(t,1),this.validateAndEmmitChanges()},toBeEditedValue(e,t,i){if(!this.toEdit)return;if(!this.isRegisteredItem(t))return;let s=this.dataFormItems[e];return`${s[i]?s[i]:""}`},isRegisteredItem(e){if(0!=this.dataFormItems.length)return!!this.dataFormItems.find((t=>t.id==e))},settingItemsDataForEditing(){0!=this.dataFormItems.length&&(this.itemList=this.dataFormItems.slice())}},created(){this.toEdit&&this.settingItemsDataForEditing()}};const oe=(0,D.Z)(ae,[["render",ie],["__scopeId","data-v-3a19ee46"]]);var ne=oe,le={components:{TheDateInput:Q,FormInvoiceItems:ne},data(){return{clickedElement:null,formData:{senderAddress:{street:"",city:"",postCode:"",country:""},paymentTerms:1,clientName:"",clientEmail:"",clientAddress:{street:"",city:"",postCode:"",country:""},createdAt:"",description:"",items:[],status:"pending"},isSubmitButtonClicked:!1,filteredUserInvoiceById:null,toEdit:!1,isFormValid:!1,flag:!1,inputvalidationMap:{senderAddress_street:!1,senderAddress_city:!1,senderAddress_postCode:!1,senderAddress_country:!1,clientName:!1,clientEmail:!1,clientAddress_street:!1,clientAddress_city:!1,clientAddress_postCode:!1,clientAddress_country:!1,createdAt:!1,description:!1,items:[]}}},watch:{$route(){this.closeForm()}},methods:{closeForm(){this.$store.dispatch("closeFormInvoice")},getClickedElement(e){this.clickedElement=e.target},handleSubmitButtonClick(){},handleinputvalidationMap(e,t){let i=e.join("_");this.inputvalidationMap[i]=t},getInputValue(e,t){this.handleinputvalidationMap(e,t.isValid);let i=e.pop(),s=e.reduce(((e,t)=>e[t]=e[t]||{}),this.formData);s[i]=t.value},calcPaymentDue(){let[e,t,i]=this.formData["createdAt"].split(" "),s=this.formData["paymentTerms"],a=x.indexOf(t),o=new Date(e,a+1,0).getDate(),n=+i+ +s,l=n>o,r=l?n-o+0:n;a=l?a+1:a;let d=a>11?+e+1:e;a=a>11?0:a;let c=`${d} ${x[a].substring(0,3)} ${r}`;return c},getItemsData(e){this.formData={...this.formData,items:e.value},this.inputvalidationMap["items"]=e.isValid},isRegisteredInvoice(e){return!!e.id},saveInvoice(e,t){t.preventDefault(),this.checkIsFormValid();const i=this.toEdit?this.formData.id:(0,R.Z)(),s={invoice:{...this.formData,id:i,status:(this.toEdit&&this.formData.status,e)},toEdit:this.toEdit};this.$store.dispatch("invoices/postInvoice",s),this.$store.dispatch("invoices/addInvoice",s),this.closeForm()},toBeEditedValue(...e){if(!this.toEdit)return;let t=e.reduce(((e,t)=>e[t]),this.filteredUserInvoiceById);return this.handleinputvalidationMap(e,!!t),t},settingDataForEditing(){if(this.$store.getters.toEdit){this.toEdit=this.$store.getters.toEdit,this.filteredUserInvoiceById=JSON.parse(JSON.stringify(this.$store.getters["invoices/filteredUserInvoiceById"])),this.formData=JSON.parse(JSON.stringify(this.filteredUserInvoiceById));let e=this.filteredUserInvoiceById.items.slice(),t=e.length>0&&se(e);this.getItemsData({value:e,isValid:t})}},checkIsFormValid(){return se(this.inputvalidationMap)}},created(){this.settingDataForEditing()},mounted(){this.formData["paymentDue"]=this.calcPaymentDue()},updated(){this.formData["paymentDue"]=this.calcPaymentDue()}};const re=(0,D.Z)(le,[["render",M],["__scopeId","data-v-561b89ce"]]);var de=re;function ce(e,t,i,s,o,n){return(0,a.wg)(),(0,a.iD)("div",{class:"backdrop",onClick:t[0]||(t[0]=(...e)=>n.close&&n.close(...e))})}var ue=i(65),me={computed:{isFormInvoiceOpen(){return this.$store.getters.isFormInvoiceOpen},isBaseDialogClosed(){return this.$store.getters.isBaseDialogClosed}},methods:{...(0,ue.nv)(["closeFormInvoice","closeBaseDialog"]),close(){this.isFormInvoiceOpen&&this.closeFormInvoice(),!this.isBaseDialogClosed&&this.closeBaseDialog({isClosed:!0})}}};const pe=(0,D.Z)(me,[["render",ce],["__scopeId","data-v-5371762c"]]);var he=pe,ge={components:{TheSidebar:C,FormInvoice:de,TheBackdrop:he},date(){return{openFormInvoice:!1,closeFilterList:!1}},provide:["closeFilterList"],computed:{themeId(){return this.$store.getters.theme},isLandingPage(){return"/"==this.$route.path},showRequestStateMessage(){return this.$store.getters["HTTPRequest/showRequestStateMessage"]},message(){return this.$store.getters["HTTPRequest/message"]},messageType(){return this.$store.getters["HTTPRequest/requestStateMessageType"]},isFormInvoiceOpen(){return this.$store.getters.isFormInvoiceOpen},isBaseDialogClosed(){return this.$store.getters.isBaseDialogClosed},showBackdrop(){return!this.isBaseDialogClosed||this.isFormInvoiceOpen},isLoading(){return this.$store.getters["HTTPRequest/isLoading"]},isAuthenticated(){return this.$store.getters["auth/isAuthenticated"]}},watch:{isAuthenticated(){this.isAuthenticated||"/"===this.$route.fullPath||this.$router.replace("/")}},methods:{handleMainClick(e){e.target.closest(".filter")||this.$store.dispatch("closeFilterList",{isClosed:!0,dialogRole:null})}},mounted(){this.$store.dispatch("auth/tryLogin")}};const ve=(0,D.Z)(ge,[["render",r]]);var ye=ve,Ie=i(678),_e=i.p+"img/logo.7d481aac.svg";const De=e=>((0,a.dD)("data-v-53d93174"),e=e(),(0,a.Cn)(),e),fe={class:"landing-page"},ke={class:"content"},be={class:"content__action content__action--logout"},we={class:"content__action content__action--mood"},Ce={class:"round-border"},Be=De((()=>(0,a._)("div",{class:"content__left-side"},[(0,a._)("img",{class:"logo",src:_e,alt:""}),(0,a._)("header",{class:"left-side__header"},[(0,a._)("h1",null,"Invoice App"),(0,a._)("p",null,"Store your invoices and track your payments now.")])],-1))),Ve={class:"content__right-side"},Se={key:0,class:"right-side__auth-form"},qe={class:"right-side__header"},$e={class:"auth-form__actions"},Te={key:0,class:"content__toInvoice"},Le=De((()=>(0,a._)("div",{class:"toInvoice__message"},[(0,a._)("h2",{class:"right-side__header"},"Welcome 😃"),(0,a._)("p",null,[(0,a.Uk)(" You registered successfully. "),(0,a._)("br"),(0,a._)("br"),(0,a.Uk)(" Go and check your invoices now. ")])],-1))),Fe={class:"toInvoice__action"};function Ee(e,t,i,n,l,r){const d=(0,a.up)("BaseButton"),c=(0,a.up)("BaseIcon"),u=(0,a.up)("BaseInput"),m=(0,a.up)("LogoutDialog");return(0,a.wg)(),(0,a.iD)("section",fe,[(0,a._)("div",ke,[(0,a._)("div",be,[r.isUserAuthenticated?((0,a.wg)(),(0,a.j4)(d,{key:0,type:"button",name:"logout",color:"dark",onClick:r.showLogoutDialog},null,8,["onClick"])):(0,a.kq)("",!0)]),(0,a._)("div",we,[(0,a._)("div",Ce,[(0,a.Wm)(c,{name:r.moodIcon,size:"medium",onClick:r.toggleTheme},null,8,["name","onClick"])])]),Be,(0,a._)("div",Ve,[(0,a.Wm)(s.uT,{name:"auth-form"},{default:(0,a.w5)((()=>[r.isUserAuthenticated?(0,a.kq)("",!0):((0,a.wg)(),(0,a.iD)("div",Se,[(0,a._)("h2",qe,(0,o.zw)(r.currentFormName),1),(0,a._)("form",{onSubmit:t[2]||(t[2]=(...e)=>r.handleAuth&&r.handleAuth(...e))},[(0,a.Wm)(u,{type:"email",label:"Email",isSubmitButtonClicked:l.isSubmitButtonClicked,onGetValue:t[0]||(t[0]=e=>r.getInputValue("email",e)),isWhiteInput:!0,value:"demo@gmail.com",errorMessage:"ivalid email"},null,8,["isSubmitButtonClicked"]),(0,a.Wm)(u,{type:"password",label:"Password",isSubmitButtonClicked:l.isSubmitButtonClicked,onGetValue:t[1]||(t[1]=e=>r.getInputValue("password",e)),isWhiteInput:!0,value:"789632145",errorMessage:"password must be at least 7 numbers"},null,8,["isSubmitButtonClicked"]),(0,a._)("div",$e,[(0,a.Wm)(d,{type:"button",name:r.switchButtonName,color:"transparent",size:"medium",onClick:r.toggleButton},null,8,["name","onClick"]),(0,a.Wm)(d,{type:"submit",name:r.SubmitButtonName,color:"purple",size:"medium",onClick:r.handleIsSubmitButtonClicked,disabled:!l.isFormValid},null,8,["name","onClick","disabled"])])],32)]))])),_:1}),(0,a.Wm)(s.uT,{name:"toInvoices"},{default:(0,a.w5)((()=>[r.isUserAuthenticated?((0,a.wg)(),(0,a.iD)("div",Te,[Le,(0,a._)("div",Fe,[(0,a.Wm)(d,{type:"submit",name:"My invoices",color:"purple",size:"medium",onClick:r.toInvoices},null,8,["onClick"])])])):(0,a.kq)("",!0)])),_:1})])]),(0,a.Wm)(m)])}var We={components:{LogoutDialog:k},data(){return{formData:{email:"demo@gmail.com",password:"789632145"},isLogin:!0,isSubmitButtonClicked:!1,inputvalidationMap:{email:!0,password:!0},isFormValid:!0}},computed:{currentFormName(){return this.isLogin?"Log in":"Sign up"},SubmitButtonName(){return this.isLogin?"login":"signup"},switchButtonName(){return this.isLogin?"create a new account":"already has an account"},isUserAuthenticated(){return this.$store.getters["auth/isAuthenticated"]},moodIcon(){return"light"==this.$store.getters.theme?"moon":"sun"}},methods:{getInputValue(e,t){this.formData[e]=t.value,this.inputvalidationMap[e]=t.isValid,this.isFormValid=se(this.inputvalidationMap)},toggleButton(){this.isLogin=!this.isLogin},handleIsSubmitButtonClicked(){this.isSubmitButtonClicked=!0},handleAuth(e){e.preventDefault(),this.isLogin?this.$store.dispatch("auth/login",{email:this.formData.email,password:this.formData.password}):this.$store.dispatch("auth/signup",{email:this.formData.email,password:this.formData.password})},toInvoices(){this.$router.push("/invoices")},showLogoutDialog(){this.$store.dispatch("closeBaseDialog",{isClosed:!1,dialogRole:"logout"})},toggleTheme(){this.$store.dispatch("toggleTheme")}}};const Ae=(0,D.Z)(We,[["render",Ee],["__scopeId","data-v-53d93174"]]);var Me=Ae;const Re={key:0,class:"invoices"},Pe={key:1,class:"empty"};function Ze(e,t,i,s,n,l){const r=(0,a.up)("InvoicesHeader"),d=(0,a.up)("InvoicesCard");return(0,a.wg)(),(0,a.iD)("section",{class:(0,o.C_)(["invoice-page",{"full-height":0==l.invoiceNumber}])},[(0,a.Wm)(r,{invoiceNumber:l.invoiceNumber},null,8,["invoiceNumber"]),l.invoiceNumber>0?((0,a.wg)(),(0,a.iD)("section",Re,[((0,a.wg)(!0),(0,a.iD)(a.HY,null,(0,a.Ko)(l.invoices,(e=>((0,a.wg)(),(0,a.j4)(d,{key:e.id,invoice:e},null,8,["invoice"])))),128))])):((0,a.wg)(),(0,a.iD)("div",Pe))],2)}const ze=e=>((0,a.dD)("data-v-6f973e8a"),e=e(),(0,a.Cn)(),e),Ne={class:"base-header"},Ue={class:"header"},Oe=ze((()=>(0,a._)("h1",null,"Invoices",-1))),Ge={class:"base-header__controls"},xe={class:"filter"},He=["checked"],je={class:"filter__label",for:"toggle-list"},Ye=ze((()=>(0,a._)("small",null,[(0,a.Uk)(" Filter "),(0,a._)("span",null," by stauts")],-1))),Je=ze((()=>(0,a._)("span",{class:"button-name"},[(0,a.Uk)("New "),(0,a._)("span",null,"Invoice")],-1)));function Ke(e,t,i,n,l,r){const d=(0,a.up)("BaseIcon"),c=(0,a.up)("BaseList"),u=(0,a.up)("BaseButton");return(0,a.wg)(),(0,a.iD)("section",Ne,[(0,a._)("header",Ue,[Oe,(0,a._)("small",null,"There are "+(0,o.zw)(i.invoiceNumber)+" total invoices",1)]),(0,a._)("div",Ge,[(0,a._)("div",xe,[(0,a._)("input",{type:"checkbox",name:"toggle-filter-list",onClick:t[0]||(t[0]=(0,s.iM)(((...e)=>r.toggleList&&r.toggleList(...e)),["stop"])),id:"toggle-list",checked:!r.isFilterListClosed},null,8,He),(0,a._)("label",je,[Ye,(0,a.Wm)(d,{name:"chevron",size:"small"})]),r.isFilterListClosed?(0,a.kq)("",!0):((0,a.wg)(),(0,a.j4)(c,{key:0,type:"filter",list:l.list,defualtFilter:l.statusfilterValue,onGetValue:t[1]||(t[1]=e=>r.getStatusFilterValue(e))},null,8,["list","defualtFilter"]))]),(0,a.Wm)(u,{color:"purple",onClick:e.openFormInvoice},{name:(0,a.w5)((()=>[Je])),default:(0,a.w5)((()=>[(0,a.Wm)(d,{name:"add",size:"big"})])),_:1},8,["onClick"])])])}var Qe={props:{invoiceNumber:{type:Number,default:1}},data(){return{list:["Paid","Pending","Draft","All"],statusfilterValue:"All"}},computed:{isFilterListClosed(){return this.$store.getters.isFilterListClosed}},methods:{...(0,ue.nv)(["openFormInvoice"]),toggleList(){this.isFilterListClosed?this.$store.dispatch("closeFilterList",{isClosed:!1}):this.$store.dispatch("closeFilterList",{isClosed:!0})},getStatusFilterValue(e){this.statusfilterValue=e.value}}};const Xe=(0,D.Z)(Qe,[["render",Ke],["__scopeId","data-v-6f973e8a"]]);var et=Xe;const tt=e=>((0,a.dD)("data-v-0338557e"),e=e(),(0,a.Cn)(),e),it={class:"left"},st={class:"id"},at=tt((()=>(0,a._)("span",{class:"hash"},"#",-1))),ot={class:"date"},nt={class:"total"},lt={class:"client-name"},rt={class:"client-name"},dt={class:"right"},ct={class:"total"},ut={class:"client-name"},mt={class:"chevron-icon"};function pt(e,t,i,s,n,l){const r=(0,a.up)("BaseStatusBadge"),d=(0,a.up)("BaseIcon");return(0,a.wg)(),(0,a.iD)("div",{class:"card",onClick:t[0]||(t[0]=e=>l.navigateToInoviceDetailsPage())},[(0,a._)("div",it,[(0,a._)("span",st,[at,(0,a.Uk)((0,o.zw)(i.invoice.id.substring(0,6)),1)]),(0,a._)("span",ot,"Due "+(0,o.zw)(l.paymentDate),1),(0,a._)("span",nt," $"+(0,o.zw)(l.total),1)]),(0,a._)("div",lt,[(0,a._)("span",rt,(0,o.zw)(i.invoice.clientName),1)]),(0,a._)("div",dt,[(0,a._)("span",ct," $"+(0,o.zw)(l.total),1),(0,a._)("span",ut,(0,o.zw)(i.invoice.clientName),1),(0,a.Wm)(r,{status:i.invoice.status},null,8,["status"])]),(0,a._)("div",mt,[(0,a.Wm)(d,{name:"chevron"})])])}var ht={props:{invoice:{}},computed:{total(){return this.invoice.items?this.invoice.items.reduce(((e,t)=>e+ +t.total),0):0},paymentDate(){let e=this.invoice.paymentDue.split(" ");return`${e[0]} ${e[1].substring(0,3)} ${e[2]}`}},methods:{navigateToInoviceDetailsPage(){this.$router.push(`/invoice/${this.invoice.id}`)}}};const gt=(0,D.Z)(ht,[["render",pt],["__scopeId","data-v-0338557e"]]);var vt=gt,yt={components:{InvoicesHeader:et,InvoicesCard:vt},data(){return{}},computed:{invoices(){return this.$store.getters["invoices/filteredUserInvoices"]},invoiceNumber(){return this.invoices.length}},methods:{calculateTotal(e){return e?e.reduce(((e,t)=>e+ +t.total),0):0}},created(){this.$store.dispatch("invoices/getInvoices")}};const It=(0,D.Z)(yt,[["render",Ze],["__scopeId","data-v-baffb3a0"]]);var _t=It;const Dt=e=>((0,a.dD)("data-v-1676862e"),e=e(),(0,a.Cn)(),e),ft={class:"details-page"},kt=Dt((()=>(0,a._)("span",{class:"nav-back__text"},"Go back",-1))),bt={key:0,class:"details-page__content"},wt={class:"status"},Ct=Dt((()=>(0,a._)("span",null," Status ",-1)));function Bt(e,t,i,s,o,n){const l=(0,a.up)("BaseIcon"),r=(0,a.up)("BaseStatusBadge"),d=(0,a.up)("DetailsControls"),c=(0,a.up)("DetailsInvoice"),u=(0,a.up)("NotFoundPage");return(0,a.wg)(),(0,a.iD)("div",ft,[(0,a._)("nav",{class:"nav-back",onClick:t[0]||(t[0]=e=>n.navigateBack())},[(0,a.Wm)(l,{name:"chevron"}),kt]),n.invoice?((0,a.wg)(),(0,a.iD)("section",bt,[(0,a._)("div",wt,[Ct,(0,a.Wm)(r,{status:n.invoice.status},null,8,["status"])]),(0,a.Wm)(d,{status:n.invoice.status,invoiceId:i.id},null,8,["status","invoiceId"]),(0,a.Wm)(c,{invoiceData:n.invoice},null,8,["invoiceData"])])):((0,a.wg)(),(0,a.j4)(u,{key:1}))])}const Vt={class:"details-invoices"},St={class:"sender-data"},qt={class:"description"},$t={class:"client-data"},Tt={class:"date-data"},Lt={class:"client-address"},Ft={class:"client-email"};function Et(e,t,i,s,o,n){const l=(0,a.up)("DetailsDataCell"),r=(0,a.up)("DetailsInvoiceAddressVue"),d=(0,a.up)("DetailsItemsTable");return(0,a.wg)(),(0,a.iD)("div",Vt,[(0,a._)("div",St,[(0,a._)("div",qt,[(0,a.Wm)(l,{title:i.invoiceData.description,data:n.id,reverse:!0},null,8,["title","data"])]),(0,a.Wm)(r,{addressData:i.invoiceData.senderAddress},null,8,["addressData"])]),(0,a._)("div",$t,[(0,a._)("div",Tt,[(0,a.Wm)(l,{title:"Invoice Date",data:n.createdAt},null,8,["data"]),(0,a.Wm)(l,{title:"Payment Due",data:n.paymentDue},null,8,["data"])]),(0,a._)("div",Lt,[(0,a.Wm)(l,{title:"Bill To",data:i.invoiceData.clientName},null,8,["data"]),(0,a.Wm)(r,{addressData:i.invoiceData.clientAddress},null,8,["addressData"])]),(0,a._)("div",Ft,[(0,a.Wm)(l,{title:"Sent to",data:i.invoiceData.clientEmail},null,8,["data"])])]),(0,a.Wm)(d,{items:i.invoiceData.items},null,8,["items"])])}const Wt={class:"address"};function At(e,t,i,s,n,l){return(0,a.wg)(),(0,a.iD)("div",Wt,[((0,a.wg)(!0),(0,a.iD)(a.HY,null,(0,a.Ko)(i.addressData,((e,t)=>((0,a.wg)(),(0,a.iD)("span",{key:l.key(e,t)},(0,o.zw)(e),1)))),128))])}var Mt={props:{addressData:{required:!0}},methods:{key(e,t){return""==e?`addressDataKey${t}`:e+t}}};const Rt=(0,D.Z)(Mt,[["render",At],["__scopeId","data-v-44bc12d4"]]);var Pt=Rt;const Zt=e=>((0,a.dD)("data-v-bfe1197a"),e=e(),(0,a.Cn)(),e),zt={class:"title"},Nt={key:0,class:"data"},Ut={key:1,class:"data"},Ot=Zt((()=>(0,a._)("span",{class:"hash"},"#",-1)));function Gt(e,t,i,s,n,l){return(0,a.wg)(),(0,a.iD)("div",{class:(0,o.C_)(["data-cell",{"reverse-order":i.reverse}])},[(0,a._)("span",zt,(0,o.zw)(i.title),1),i.reverse?(0,a.kq)("",!0):((0,a.wg)(),(0,a.iD)("span",Nt,(0,o.zw)(i.data),1)),i.reverse?((0,a.wg)(),(0,a.iD)("span",Ut,[Ot,(0,a.Uk)((0,o.zw)(i.data),1)])):(0,a.kq)("",!0)],2)}var xt={props:{title:{type:String,required:!0},data:{type:String,required:!0},reverse:{type:Boolean,default:!1}}};const Ht=(0,D.Z)(xt,[["render",Gt],["__scopeId","data-v-bfe1197a"]]);var jt=Ht;const Yt=e=>((0,a.dD)("data-v-1bca70bd"),e=e(),(0,a.Cn)(),e),Jt={class:"items-table"},Kt=Yt((()=>(0,a._)("thead",null,[(0,a._)("tr",{class:"hidden-small-screen"},[(0,a._)("th",null,"Item Name"),(0,a._)("th",null,"QTY."),(0,a._)("th",null,"Price"),(0,a._)("th",null,"Total")])],-1))),Qt=Yt((()=>(0,a._)("br",{class:"hidden-bigger-screen"},null,-1))),Xt={class:"gray-text hidden-bigger-screen"},ei={class:"gray-text hidden-small-screen"},ti={class:"gray-text hidden-small-screen"},ii=Yt((()=>(0,a._)("th",null,"Total",-1))),si=Yt((()=>(0,a._)("td",{class:"hidden-small-screen"},null,-1))),ai=Yt((()=>(0,a._)("td",{class:"hidden-small-screen"},null,-1))),oi={class:"value"};function ni(e,t,i,s,n,l){return(0,a.wg)(),(0,a.iD)("div",Jt,[(0,a._)("table",null,[Kt,(0,a._)("tbody",null,[((0,a.wg)(!0),(0,a.iD)(a.HY,null,(0,a.Ko)(i.items,(e=>((0,a.wg)(),(0,a.iD)("tr",{key:e.name},[(0,a._)("td",null,[(0,a.Uk)((0,o.zw)(e.name),1),Qt,(0,a._)("span",Xt,(0,o.zw)(e.quantity)+" x $"+(0,o.zw)(e.price),1)]),(0,a._)("td",ei,(0,o.zw)(e.quantity),1),(0,a._)("td",ti,"$"+(0,o.zw)(e.price),1),(0,a._)("td",null,"$"+(0,o.zw)(e.total),1)])))),128))]),(0,a._)("tfoot",null,[(0,a._)("tr",null,[ii,si,ai,(0,a._)("td",oi,"$"+(0,o.zw)(l.total),1)])])])])}var li={props:{items:{default:[]}},computed:{total(){return this.items.reduce(((e,t)=>e+ +t.total),0)}}};const ri=(0,D.Z)(li,[["render",ni],["__scopeId","data-v-1bca70bd"]]);var di=ri,ci={components:{DetailsInvoiceAddressVue:Pt,DetailsDataCell:jt,DetailsItemsTable:di},props:{invoiceData:{required:!0}},computed:{createdAt(){return this.reformateDate(this.invoiceData.createdAt)},paymentDue(){return this.reformateDate(this.invoiceData.paymentDue)},id(){if(this.invoiceData.id)return this.invoiceData.id.substring(0,6)}},methods:{reformateDate(e){if(!e)return;let t=e.split(" ");return`${t[0]} ${t[1].substring(0,3)} ${t[2]}`}}};const ui=(0,D.Z)(ci,[["render",Et],["__scopeId","data-v-237861a6"]]);var mi=ui;const pi={class:"details-controls"},hi={class:"controls"};function gi(e,t,i,s,o,n){const l=(0,a.up)("BaseButton"),r=(0,a.up)("BaseDialog");return(0,a.wg)(),(0,a.iD)("div",pi,[(0,a._)("div",hi,[(0,a.Wm)(l,{name:"Edit",color:"gray",onClick:t[0]||(t[0]=t=>e.openFormInvoice({toEdit:!0}))}),(0,a.Wm)(l,{name:"Delete",color:"red",onClick:n.showBaseDialog},null,8,["onClick"]),"pending"==i.status?((0,a.wg)(),(0,a.j4)(l,{key:0,name:"Mark As Paid",color:"purple",onClick:n.markInvoiceAsPaid},null,8,["onClick"])):(0,a.kq)("",!0)]),((0,a.wg)(),(0,a.j4)(a.lR,{to:"body"},["delete"==n.baseDialogRole?((0,a.wg)(),(0,a.j4)(r,{key:"delete",title:"Confirm Delete",message:n.dialogMessage},{action:(0,a.w5)((()=>[(0,a.Wm)(l,{name:"Delete",color:"red",onClick:n.deleteInvoice},null,8,["onClick"])])),_:1},8,["message"])):(0,a.kq)("",!0)]))])}var vi={props:{status:{type:String,required:!0},invoiceId:{type:String}},computed:{dialogMessage(){return`Are you sure you want to delete invoice \n      #${this.invoiceId.substring(0,6)}? This action cannot be undone.`},isBaseDialogClosed(){return this.$store.getters.isBaseDialogClosed},baseDialogRole(){return this.$store.getters.baseDialogRole}},methods:{...(0,ue.nv)(["openFormInvoice"]),markInvoiceAsPaid(){this.$store.getters["invoices/filteredUserInvoiceById"].status="paid",this.$store.dispatch("invoices/patchInvoice",{status:"paid"})},deleteInvoice(){this.$store.dispatch("closeBaseDialog",{isClosed:!0,dialogRole:null}),setTimeout((()=>this.$router.push("/invoices")),1e3),this.$store.dispatch("invoices/deleteInvoice",{id:this.invoiceId})},showBaseDialog(){this.$store.dispatch("closeBaseDialog",{isClosed:!1,dialogRole:"delete"})}}};const yi=(0,D.Z)(vi,[["render",gi],["__scopeId","data-v-6be053e3"]]);var Ii=yi;function _i(e,t,i,s,n,l){return(0,a.wg)(),(0,a.iD)("span",{class:(0,o.C_)(["base-icon",[l.icon,i.size]])},"icon",2)}var Di={props:{name:{type:String,required:!0},size:{type:String,required:!1,default:"medium"}},computed:{icon(){return`base-icon--${this.name}`}}};const fi=(0,D.Z)(Di,[["render",_i],["__scopeId","data-v-2c9382b2"]]);var ki=fi;const bi={class:"notfound-page"};function wi(e,t){return(0,a.wg)(),(0,a.iD)("section",bi)}const Ci={},Bi=(0,D.Z)(Ci,[["render",wi],["__scopeId","data-v-4904acf3"]]);var Vi=Bi,Si={props:{id:{required:!0}},components:{DetailsInvoice:mi,DetailsControls:Ii,BaseIcon:ki,NotFoundPage:Vi},methods:{navigateBack(){this.invoice?this.$router.go(-1):this.$router.replace("/invoices")}},computed:{invoice(){return this.$store.getters["invoices/filteredUserInvoiceById"]}},beforeCreate(){this.$store.dispatch("invoices/getInvoiceById",{id:this.id})}};const qi=(0,D.Z)(Si,[["render",Bt],["__scopeId","data-v-1676862e"]]);var $i=qi,Ti={isFormInvoiceOpen(e){return e.isFormInvoiceOpen},toEdit(e){return e.toEdit},isFilterListClosed(e){return e.isFilterListClosed},isBaseDialogClosed(e){return e.isBaseDialogClosed},baseDialogRole(e){return e.baseDialogRole},theme(e){return e.theme}},Li={openFormInvoice(e,t){e.isFormInvoiceOpen=!0,e.toEdit=!!t&&t.toEdit},closeFormInvoice(e){e.isFormInvoiceOpen=!1},closeFilterList(e,t){e.isFilterListClosed=t.isClosed},closeBaseDialog(e,t){e.isBaseDialogClosed=t.isClosed,e.baseDialogRole=t.dialogRole},toggleTheme(e){let t="light"==e.theme?"dark":"light";e.theme=t,localStorage.setItem("theme",t)}},Fi={openFormInvoice(e,t){e.commit("openFormInvoice",t)},closeFormInvoice(e){e.commit("closeFormInvoice")},closeFilterList(e,t){e.commit("closeFilterList",t)},closeBaseDialog(e,t){e.commit("closeBaseDialog",t)},toggleTheme(e){e.commit("toggleTheme")}},Ei={isAuthenticated(e){return e.isAuthenticated}},Wi={setUser(e,t){e.isAuthenticated=t.isAuthenticated,e.userId=t.userId,e.idToken=t.idToken}};const Ai="AIzaSyDpbKV6xKLcXbIuTlS_roF539vJrroTG_E";let Mi;var Ri={async authenticate(e,t){let i;i="signup"==t.type?"https://identitytoolkit.googleapis.com/v1/accounts:signUp?key="+Ai:"https://identitytoolkit.googleapis.com/v1/accounts:signInWithPassword?key="+Ai;const s={method:"POST",body:JSON.stringify({email:t.email,password:t.password,returnSecureToken:!0})},a=await e.dispatch("HTTPRequest/sendRequest",{url:i,reqOptions:s},{root:!0});if(!a)return;localStorage.setItem("idToken",a.idToken),localStorage.setItem("userId",a.localId);let o=1e3*+a.expiresIn,n=(new Date).getTime()+o;localStorage.setItem("expireationTime",n),e.commit("setUser",{idToken:a.idToken,userId:a.localId,isAuthenticated:!!a.idToken}),Mi=setTimeout((()=>{e.dispatch("logout")}),o)},async signup(e,t){e.dispatch("authenticate",{...t,type:"signup"})},async login(e,t){e.dispatch("authenticate",{...t,type:"login"})},tryLogin(e){let t=localStorage.getItem("expireationTime"),i=t-(new Date).getTime();if(i<10)return;Mi=setTimeout((()=>{e.dispatch("logout")}),i);let s=localStorage.getItem("idToken"),a=localStorage.getItem("userId");s&&e.commit("setUser",{userId:a,idToken:s,isAuthenticated:!!s})},logout(e){localStorage.removeItem("idToken"),localStorage.removeItem("userId"),localStorage.removeItem("expireationTime"),clearTimeout(Mi),e.commit("setUser",{userId:null,idToken:null,isAuthenticated:!1})}};const Pi={namespaced:!0,state(){return{idToken:null,isAuthenticated:!1,userId:""}},getters:Ei,mutations:Wi,actions:Ri};var Zi={userInvoices(e){return e.userInvoices},filteredUserInvoices(e){return e.filteredUserInvoices},filteredUserInvoiceById(e){return e.filteredUserInvoiceById}},zi={setInvoices(e,t){e.userInvoices=t.invoices,e.filteredUserInvoices=t.invoices},setFilteredInvoiceById(e,t){e.filteredUserInvoiceById=t.invoice},filterUserInvoiceByStatus(e,t){"all"==t.status?e.filteredUserInvoices=e.userInvoices:e.filteredUserInvoices=e.userInvoices.filter((e=>e.status==t.status))},addInvoice(e,t){const i=e.userInvoices.find((e=>e.id==t.invoice.id));if(i){const i=e.userInvoices.findIndex((e=>e.id==t.invoice.id));e.userInvoices[i]={...t.invoice}}else e.userInvoices.unshift(t.invoice)},markAsPaid(e){e.filteredUserInvoiceById.status="paid"}},Ni={async postInvoice(e,t){const i=t.invoice.id,s={method:"PUT",body:JSON.stringify(t.invoice)},a=t.toEdit?`invoice # ${t.invoice.id.substring(0,6)} has been edited`:"an invoice has been added";await e.dispatch("sendRequest",{reqOptions:s,path:i,message:a})},async patchInvoice(e,t){const i=e.rootState.invoices.filteredUserInvoiceById.id,s={method:"PATCH",body:JSON.stringify(t)},a="Invoice status has been updated";await e.dispatch("sendRequest",{reqOptions:s,path:i,message:a})},async getInvoices(e){const t={method:"GET"},i=await e.dispatch("sendRequest",{reqOptions:t}),s=[];for(const a in i){let e=i[a].items?i[a]:{...i[a],items:[]};s.push(e)}e.commit("setInvoices",{invoices:s})},async getInvoiceById(e,t){const i={method:"GET"},s=t.id,a=await e.dispatch("sendRequest",{reqOptions:i,path:s});if(!a)return void e.commit("setFilteredInvoiceById",{invoice:null});let o=a.items?a:{...a,items:[]};e.commit("setFilteredInvoiceById",{invoice:o})},async deleteInvoice(e,t){const i={method:"DELETE"},s=t.id,a=`Invoice #${s.substring(0,6)} has been deleted`;await e.dispatch("sendRequest",{reqOptions:i,path:s,message:a})},async sendRequest(e,{path:t,message:i,reqOptions:s}){const a=e.rootState.auth.userId,o=e.rootState.auth.idToken,n=t?`${a}/${t}`:a,l=`https://aswanmearn-default-rtdb.firebaseio.com/${n}.json?auth=${o}`;return await e.dispatch("HTTPRequest/sendRequest",{url:l,message:i,reqOptions:s},{root:!0})},filterUserInvoiceById(e,t){e.commit("setFilterUserInvoiceById",t)},filterUserInvoiceByStatus(e,t){e.commit("filterUserInvoiceByStatus",t)},addInvoice(e,t){e.commit("addInvoice",{invoice:t.invoice}),t.toEdit&&e.commit("setFilteredInvoiceById",t)}};const Ui={namespaced:!0,state(){return{userInvoices:[],filteredUserInvoices:[],filteredUserInvoiceById:null,hasError:!1}},getters:Zi,mutations:zi,actions:Ni};i(6699),i(1703);function Oi(e,t,i){const s=["DELETE"];return!i||!s.includes(e)&&!t}const Gi={namespaced:!0,state(){return{message:null,showRequestStateMessage:!1,requestStateMessageType:null,isLoading:!1}},getters:{showRequestStateMessage(e){return e.showRequestStateMessage},message(e){return e.message},requestStateMessageType(e){return e.requestStateMessageType},isLoading(e){return e.isLoading}},mutations:{setRequestState(e,t){e.showRequestStateMessage=t.showRequestStateMessage,e.requestStateMessageType=t.requestStateMessageType,e.message=t.message},setIsLoading(e,t){e.isLoading=t.isLoading}},actions:{async sendRequest(e,{url:t,reqOptions:i,message:s}){let a,o;e.commit("setIsLoading",{isLoading:!1});try{e.commit("setIsLoading",{isLoading:!0}),a=await fetch(t,{...i,headers:{"Content-Type":"application/json"}}),o=await a.json();const n=o&&o.error?o.error.message:"";if(Oi(i.method,o,a.ok))throw new Error(s||n);e.commit("setIsLoading",{isLoading:!1}),e.commit("setRequestState",{showRequestStateMessage:!!s,requestStateMessageType:"success",message:s})}catch(n){return e.commit("setIsLoading",{isLoading:!1}),void e.commit("setRequestState",{showRequestStateMessage:!0,requestStateMessageType:"error",message:n.message})}return o},setRequestState(e,t){e.commit("setRequestState",t)}}};var xi=(0,ue.MT)({modules:{auth:Pi,invoices:Ui,HTTPRequest:Gi},state(){return{isFormInvoiceOpen:!1,toEdit:!1,isFilterListClosed:!0,isBaseDialogClosed:!0,baseDialogRole:null,theme:localStorage.getItem("theme")||"light"}},getters:Ti,mutations:Li,actions:Fi});const Hi=(0,Ie.p7)({history:(0,Ie.PO)(),routes:[{path:"/",component:Me,meta:{transition:"slide-left"}},{path:"/invoices",component:_t,meta:{transition:"slide-right"}},{path:"/invoice/:id",component:$i,props:!0,meta:{transition:"slide-left"}},{path:"/notfound",component:Vi}]});Hi.beforeEach(((e,t,i)=>{"/"!=e.path?xi.getters["auth/isAuthenticated"]?i():i("/"):i()}));var ji=Hi;const Yi={class:"base-input"},Ji=["for"],Ki=["type","id","placeholder","readonly"],Qi={key:1,class:"error-message"};function Xi(e,t,i,n,l,r){const d=(0,a.up)("BaseIcon");return(0,a.wg)(),(0,a.iD)("div",Yi,[(0,a._)("label",{for:i.label,class:(0,o.C_)({"color-red":!l.isValid})},(0,o.zw)(i.label),11,Ji),(0,a.wy)((0,a._)("input",{required:"",ref:"input","onUpdate:modelValue":t[0]||(t[0]=e=>l.inputValue=e),type:i.type,id:i.label,placeholder:i.placeholder,readonly:i.readonly,class:(0,o.C_)(r.inputClasses),onInput:t[1]||(t[1]=(...e)=>r.inputChangeHandler&&r.inputChangeHandler(...e)),onBlur:t[2]||(t[2]=(...e)=>r.inputcheckValidity&&r.inputcheckValidity(...e)),min:"1",step:"any"},null,42,Ki),[[s.YZ,l.inputValue,void 0,{trim:!0}]]),i.icon?((0,a.wg)(),(0,a.j4)(d,{key:0,name:i.icon,size:"medium"},null,8,["name"])):(0,a.kq)("",!0),i.errorMessage&&!l.isValid?((0,a.wg)(),(0,a.iD)("p",Qi,(0,o.zw)(i.errorMessage),1)):(0,a.kq)("",!0)])}var es={data(){return{inputValue:this.value,isValid:!0}},props:{label:{type:String,required:!0},type:{type:String,required:!0},placeholder:{type:String},value:{},readonly:{type:Boolean,default:!1},icon:{type:String,default:null},noBorder:{type:Boolean,default:!1},isWhiteInput:{type:Boolean,default:!1},errorMessage:{type:String}},computed:{inputClasses(){let e={pointer:this.readonly,["white-input"]:this.isWhiteInput};return this.noBorder?{...e,noBorder:!0}:this.noBorder||this.isValid?e:{...e,["invalid-input"]:!0}},numberProp(){return"number"===this.type?{}:{min:1,step:"any"}}},methods:{inputcheckValidity(){let e=this.$refs.input;return"email"==this.type?(this.isValid=e.checkValidity(),this.isValid):"password"==this.type?(this.isValid=this.inputValue.length>6,this.isValid):"number"==this.type?(this.isValid=this.inputValue>0,this.isValid):"text"==this.type?(this.isValid=""!=this.inputValue,this.isValid):void 0},inputChangeHandler(){let e=this.$refs.input;this.inputcheckValidity(),this.$emit("get-value",{value:e.value,isValid:this.isValid})}},watch:{value(){this.inputValue=this.value}},emits:["get-value"]};const ts=(0,D.Z)(es,[["render",Xi],["__scopeId","data-v-7d9cc84b"]]);var is=ts;const ss=["type"];function as(e,t,i,s,n,l){return(0,a.wg)(),(0,a.iD)("button",{type:i.type,class:(0,o.C_)(["base-button",l.buttonClasses])},[(0,a.WI)(e.$slots,"default",{},void 0,!0),(0,a.WI)(e.$slots,"name",{},(()=>[(0,a.Uk)((0,o.zw)(i.name),1)]),!0)],10,ss)}var os={props:{name:{type:String},color:{type:String,required:!0},fullWidth:{type:Boolean,defualt:!1},type:{type:String,default:"button"},size:{type:String},style:{type:String}},computed:{buttonClasses(){let e=`base-button--${this.color} ${this.size?"base-button--"+this.size:""}${this.style?"base-button--"+this.style:""}`;return e}}};const ns=(0,D.Z)(os,[["render",as],["__scopeId","data-v-3f57250e"]]);var ls=ns;const rs=["onClick"],ds=["id"],cs=["for"],us=["value","id"],ms=["for"];function ps(e,t,i,n,l,r){const d=(0,a.up)("BaseIcon");return(0,a.wg)(),(0,a.iD)(a.HY,null,["list"==i.type?((0,a.wg)(),(0,a.iD)("ul",{key:0,class:(0,o.C_)(r.listClass)},[((0,a.wg)(!0),(0,a.iD)(a.HY,null,(0,a.Ko)(i.list,(e=>((0,a.wg)(),(0,a.iD)("li",{class:"base-list__item",key:e,onClick:t=>r.getValue(e)},["list"==i.type?((0,a.wg)(),(0,a.iD)("input",{key:0,type:"radio",id:e,name:"list",class:"list"},null,8,ds)):(0,a.kq)("",!0),(0,a._)("label",{for:e},"Net "+(0,o.zw)(e)+" "+(0,o.zw)(1==e?"Day":"Days"),9,cs)],8,rs)))),128))],2)):(0,a.kq)("",!0),"filter"==i.type?((0,a.wg)(),(0,a.iD)("ul",{key:1,class:(0,o.C_)(r.listClass)},[((0,a.wg)(!0),(0,a.iD)(a.HY,null,(0,a.Ko)(i.list,(e=>((0,a.wg)(),(0,a.iD)("li",{class:"base-list__item",key:e},[(0,a.wy)((0,a._)("input",{type:"radio",class:"filter",value:e,id:e,"onUpdate:modelValue":t[0]||(t[0]=e=>l.filterValue=e),onClick:t[1]||(t[1]=(...e)=>r.filterInovicesByStatus&&r.filterInovicesByStatus(...e))},null,8,us),[[s.G2,l.filterValue]]),(0,a._)("label",{for:e},[(0,a._)("span",{class:(0,o.C_)(["custom-box",{"custom-box--active":l.filterValue==e}])},null,2),(0,a.Wm)(d,{name:"check",size:"small"}),(0,a.Uk)(" "+(0,o.zw)(e),1)],8,ms)])))),128))],2)):(0,a.kq)("",!0)],64)}var hs={emits:["get-value"],props:{type:{type:String,default:"list"},hidden:{type:Boolean,default:!0},list:{type:Object},stylingClass:{type:String},defualtFilter:{type:String}},data(){return{isListHidden:!0,currentFilter:"",filterValue:this.defualtFilter}},computed:{listClass(){return`base-list base-list--${this.type}`}},watch:{hidden(){this.isListHidden=this.hidden}},methods:{getValue(e){this.$emit("get-value",{value:e,isValid:!!e})},filterInovicesByStatus(e){this.getValue(e.target.value),this.$store.dispatch("invoices/filterUserInvoiceByStatus",{status:e.target.value.toLowerCase()})}}};const gs=(0,D.Z)(hs,[["render",ps],["__scopeId","data-v-1208e81e"]]);var vs=gs;function ys(e,t,i,s,n,l){const r=(0,a.up)("BaseIcon");return(0,a.wg)(),(0,a.iD)("div",{class:(0,o.C_)(["badge","badge--"+l.color])},[(0,a.Wm)(r,{name:"circle",size:"small"}),(0,a._)("span",null,(0,o.zw)(i.status),1)],2)}var Is={data(){return{statusColor:{paid:"green",pending:"orange",draft:"gray"}}},props:{status:{type:String,required:!0}},computed:{color(){return this.statusColor[this.status]}}};const _s=(0,D.Z)(Is,[["render",ys],["__scopeId","data-v-32ac1c31"]]);var Ds=_s;const fs={class:"base-select-input"};function ks(e,t,i,s,o,n){const l=(0,a.up)("BaseInput"),r=(0,a.up)("BaseList");return(0,a.wg)(),(0,a.iD)("div",fs,[(0,a.Wm)(l,{type:"text",label:"Payment Terms",icon:"chevron",readonly:!0,value:o.listValue,onClick:n.openList},null,8,["value","onClick"]),o.isListHidden?(0,a.kq)("",!0):((0,a.wg)(),(0,a.j4)(r,{key:0,onGetValue:n.getListValue,list:o.list},null,8,["onGetValue","list"]))])}var bs={emits:["get-selected-value"],props:{clickedElement:{type:Object,default:null},value:{}},data(){return{listValue:"Net 1 Day",isListHidden:!0,list:[1,7,14,30]}},methods:{getListValue(e){this.listValue=`Net ${e.value} ${1==e.value?"Day":"Days"}`,this.$emit("get-selected-value",{value:e.value,isValid:!!e.value})},openList(){this.isListHidden=!1},hideList(){("Payment Terms"!=this.clickedElement.id||this.isListHidden)&&(this.isListHidden=!0)}},watch:{clickedElement(){this.hideList()}},mounted(){this.value&&(this.listValue=`Net ${this.value} ${1==this.value?"Day":"Days"}`)}};const ws=(0,D.Z)(bs,[["render",ks],["__scopeId","data-v-36386bce"]]);var Cs=ws;const Bs={key:0,class:"dialog__icon"},Vs={key:1,class:"dialog__icon"},Ss={class:"dialog__content"},qs={class:"heading"};function $s(e,t,i,n,l,r){return(0,a.wg)(),(0,a.iD)("section",{class:"base-message",onClick:t[0]||(t[0]=(...e)=>r.closeMessage&&r.closeMessage(...e))},[(0,a.Wm)(s.uT,{name:"message"},{default:(0,a.w5)((()=>[r.isMessageVisible&&i.show?((0,a.wg)(),(0,a.iD)("dialog",{key:0,class:(0,o.C_)(["dialog",i.type])},["success"==i.type?((0,a.wg)(),(0,a.iD)("span",Bs," 👍 ")):(0,a.kq)("",!0),"error"==i.type?((0,a.wg)(),(0,a.iD)("span",Vs," 🤷‍♂️ ")):(0,a.kq)("",!0),(0,a._)("div",Ss,[(0,a._)("p",qs,[(0,a.WI)(e.$slots,"title",{},void 0,!0)]),(0,a._)("p",null,[(0,a.WI)(e.$slots,"message",{},void 0,!0)])])],2)):(0,a.kq)("",!0)])),_:3})])}var Ts={props:{type:{default:"error"},show:{default:!0}},computed:{isMessageVisible(){return!!this.$store.getters["HTTPRequest/message"]}},methods:{closeMessage(){this.$store.dispatch("HTTPRequest/setRequestState",{showRequestStateMessage:!1,message:null})}},updated(){this.show&&setTimeout((()=>{this.closeMessage()}),5e3)}};const Ls=(0,D.Z)(Ts,[["render",$s],["__scopeId","data-v-770a9b6d"]]);var Fs=Ls;const Es=["id"],Ws={class:"base-dialog__header"},As={class:"base-dialog__body"},Ms={class:"base-dialog__actions"};function Rs(e,t,i,s,n,l){const r=(0,a.up)("BaseButton");return(0,a.wg)(),(0,a.iD)("dialog",{id:l.themeId,class:"base-dialog",open:""},[(0,a._)("header",Ws,[(0,a._)("h1",null,(0,o.zw)(i.title),1)]),(0,a._)("div",As,[(0,a._)("p",null,(0,o.zw)(i.message),1)]),(0,a._)("div",Ms,[(0,a.Wm)(r,{name:"cancel",color:"gray",onClick:l.closeBaseDialog},null,8,["onClick"]),(0,a.WI)(e.$slots,"action",{},void 0,!0)])],8,Es)}var Ps={props:{title:{type:String},message:{type:String}},computed:{themeId(){return this.$store.getters.theme}},methods:{closeBaseDialog(){this.$store.dispatch("closeBaseDialog",{isClosed:!0,dialogRole:null})},handleDialogAction(){this.$emit("dialog-action")}}};const Zs=(0,D.Z)(Ps,[["render",Rs],["__scopeId","data-v-20ec66cc"]]);var zs=Zs,Ns=i.p+"img/loader.2ba1ecef.svg";const Us=e=>((0,a.dD)("data-v-427bfe39"),e=e(),(0,a.Cn)(),e),Os={class:"base-loader"},Gs=Us((()=>(0,a._)("div",null,[(0,a._)("img",{src:Ns,alt:""})],-1))),xs=[Gs];function Hs(e,t){return(0,a.wg)(),(0,a.iD)("section",Os,xs)}const js={},Ys=(0,D.Z)(js,[["render",Hs],["__scopeId","data-v-427bfe39"]]);var Js=Ys;const Ks=(0,s.ri)(ye);Ks.component("BaseIcon",ki),Ks.component("BaseInput",is),Ks.component("BaseSelectInput",Cs),Ks.component("BaseButton",ls),Ks.component("BaseList",vs),Ks.component("BaseStatusBadge",Ds),Ks.component("BaseMessage",Fs),Ks.component("BaseDialog",zs),Ks.component("BaseLoader",Js),Ks.use(xi).use(ji).mount("#app")}},t={};function i(s){var a=t[s];if(void 0!==a)return a.exports;var o=t[s]={exports:{}};return e[s](o,o.exports,i),o.exports}i.m=e,function(){var e=[];i.O=function(t,s,a,o){if(!s){var n=1/0;for(c=0;c<e.length;c++){s=e[c][0],a=e[c][1],o=e[c][2];for(var l=!0,r=0;r<s.length;r++)(!1&o||n>=o)&&Object.keys(i.O).every((function(e){return i.O[e](s[r])}))?s.splice(r--,1):(l=!1,o<n&&(n=o));if(l){e.splice(c--,1);var d=a();void 0!==d&&(t=d)}}return t}o=o||0;for(var c=e.length;c>0&&e[c-1][2]>o;c--)e[c]=e[c-1];e[c]=[s,a,o]}}(),function(){i.n=function(e){var t=e&&e.__esModule?function(){return e["default"]}:function(){return e};return i.d(t,{a:t}),t}}(),function(){i.d=function(e,t){for(var s in t)i.o(t,s)&&!i.o(e,s)&&Object.defineProperty(e,s,{enumerable:!0,get:t[s]})}}(),function(){i.g=function(){if("object"===typeof globalThis)return globalThis;try{return this||new Function("return this")()}catch(e){if("object"===typeof window)return window}}()}(),function(){i.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)}}(),function(){i.p="/invoice-app/"}(),function(){var e={143:0};i.O.j=function(t){return 0===e[t]};var t=function(t,s){var a,o,n=s[0],l=s[1],r=s[2],d=0;if(n.some((function(t){return 0!==e[t]}))){for(a in l)i.o(l,a)&&(i.m[a]=l[a]);if(r)var c=r(i)}for(t&&t(s);d<n.length;d++)o=n[d],i.o(e,o)&&e[o]&&e[o][0](),e[o]=0;return i.O(c)},s=self["webpackChunkinvoice_app"]=self["webpackChunkinvoice_app"]||[];s.forEach(t.bind(null,0)),s.push=t.bind(null,s.push.bind(s))}();var s=i.O(void 0,[998],(function(){return i(8438)}));s=i.O(s)})();
//# sourceMappingURL=app.1cc06bce.js.map